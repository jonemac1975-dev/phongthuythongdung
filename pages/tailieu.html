<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ===== RESET ===== */
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #fff;
  color: #222;
  line-height: 1.3;
}

/* ===== HEADER ===== */
header {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 10px 16px;
  border-bottom: 1px solid #eee;
}

#btnHome {
  font-size: 13px;
  padding: 5px 10px;
  border: 1px solid #d6b656;
  background: #fff8dc;
  color: #8a6d00;
  border-radius: 4px;
  cursor: pointer;
}
#btnHome:hover {
  background: #ffeaa0;
}

/* ===== TITLE ===== */
h1 {
  margin: 0;
  font-size: 22px;
  font-weight: bold;
  color: #8a6d00;
}

body > h2 {
  font-size: 14px;
  font-weight: normal;
  margin: 8px 16px;
  color: #6b5200;
}

/* ===== CONTAINER ===== */
.container {
  padding: 0 16px 20px;
}

/* ===== CATEGORY BLOCK ===== */
.category {
  margin-bottom: 10px;
  padding: 8px 10px;
  border-radius: 6px;
  background: #fffbe8; /* vàng rất nhạt */
  border: 1px solid #f1e7b6;
}

/* ===== CATEGORY TITLE ===== */
.category > h2 {
  font-size: 16px;
  margin: 0;
  cursor: pointer;
  color: #b9961f;
  position: relative;
  padding-left: 20px;
  user-select: none;
}

/* ICON ▶ */
.category > h2::before {
  content: "▶";
  position: absolute;
  left: 0;
  top: 1px;
  font-size: 13px;
  color: #8a6d00;
  transition: transform 0.2s;
}

/* Khi mở */
.category.open > h2::before {
  content: "▼";
}

/* ===== DOCS ===== */
.docs {
  display: none; /* mặc định ẩn */
  margin-top: 6px;
}

.category.open .docs {
  display: block;
}

/* ===== LIST ===== */
.docs ul {
  margin: 4px 0 0 18px;
  padding: 0;
}

.docs li {
  margin: 2px 0;
  line-height: 1.25;
}

.docs a {
  text-decoration: none;
  color: #333;
  font-size: 14px;
}
.docs a:hover {
  color: #8a6d00;
  text-decoration: underline;
}

/* ===== MOBILE ===== */
@media (max-width: 768px) {
  h1 {
    font-size: 18px;
  }

  body > h2 {
    font-size: 13px;
  }

  .category > h2 {
    font-size: 14px;
  }

  .docs a {
    font-size: 13px;
  }

  .container {
    padding: 0 12px 16px;
  }
}
</style>


<title>Tài liệu tham khảo</title>
</head>
<body>
<header>
  <button id="btnHome">← Trang chính</button>
  <h1>Tài liệu tham khảo</h1>
</header>
<h2> nhấp vào danh mục để list tài liệu <h2>
<div class="container" id="content">
  <p>Đang tải dữ liệu...</p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

document.addEventListener("DOMContentLoaded", async () => {

  // ================= FIREBASE CONFIG (same as admin) =================
  const firebaseConfig = {
    apiKey: "AIzaSyBxBCDs_f1SE6g3mHiMDkk-VbxJfn_Q0r0",
    authDomain: "giapha-truongvan.firebaseapp.com",
    databaseURL: "https://giapha-truongvan-default-rtdb.firebaseio.com",
    projectId: "giapha-truongvan",
    storageBucket: "giapha-truongvan.firebasestorage.app",
    messagingSenderId: "322268724419",
    appId: "1:322268724419:web:9a314c6872fd713cd9b676"
  };
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const content = document.getElementById('content');
  const btnHome = document.getElementById('btnHome');
  btnHome.onclick = () => { window.location.href = '../index.html'; };

  async function loadData(){
    const snap = await get(ref(db,'danhmuc'));
    const data = snap.exists()? snap.val() : {};
    content.innerHTML = '';

    if(Object.keys(data).length === 0){
      content.innerHTML = '<p>Chưa có dữ liệu.</p>';
      return;
    }

    Object.keys(data).forEach(cat=>{
      const catDiv = document.createElement('div');
      catDiv.classList.add('category');

      const catHeader = document.createElement('h2');
      catHeader.textContent = cat;
      catDiv.appendChild(catHeader);

      const docsDiv = document.createElement('div');
      docsDiv.classList.add('docs');
      const ul = document.createElement('ul');

      (data[cat] || []).forEach(doc=>{
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = doc.link;
        a.textContent = doc.name;
        a.target = "_blank"; // mở link mới
        li.appendChild(a);
        ul.appendChild(li);
      });

      docsDiv.appendChild(ul);
      catDiv.appendChild(docsDiv);
      content.appendChild(catDiv);

      // Toggle show/hide khi click tên danh mục
      catHeader.addEventListener('click', ()=>{
        docsDiv.style.display = docsDiv.style.display==='none'?'block':'none';
      });
    });
  }

  await loadData();

});
</script>

</body>
</html>
